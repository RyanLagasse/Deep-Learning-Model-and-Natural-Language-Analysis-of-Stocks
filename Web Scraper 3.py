import urllib.request, json

#method gets the correct url to scrape
def gen_url(name):
    '''
    Takes the name of a stock and what we wan to find and returns an url to then analyze
'''
    #dictionary of stock abbriviations
    url_dict = {'S&P500':"^GSPC",'Apple Inc':'AAPL', 'Microsoft Corp':'MSFT', 'Alphabet Inc Class C':'GOOG', 'Alphabet Inc Class A':'GOOGL', 'Amazon.Com Inc.':'AMZN', 'Berkshire Hathaway Inc. Class B':'BRK.B', 'Tesla Inc':'TSLA', 'Nvidia Corp':'NVDA', 'Exxon Mobil Corp':'XOM', 'Unitedhealth Group Inc':'UNH', 'Johnson & Johnson':'JNJ', 'Visa Inc Class A':'V', 'JP Morgan Chase & Co':'JPM', 'Meta Platforms, Inc.':'META', 'Walmart Stores Inc':'WMT', 'Chevron Corp':'CVX', 'Mastercard Inc Class A':'MA', 'Procter & Gamble':'PG', 'Eli Lilly':'LLY', 'Home Depot Inc':'HD', 'Bank of America Corp':'BAC', 'Merck & Co Inc':'MRK', 'Coca-Cola':'KO', 'Abbvie Inc':'ABBV', 'Broadcom Inc.':'AVGO', 'Pfizer Inc':'PFE', 'Oracle Corp':'ORCL', 'Pepsico Inc':'PEP', 'Thermo Fisher Scientific Inc':'TMO', 'Costco Wholesale Corp':'COST', 'Mcdonalds Corp':'MCD', 'Walt Disney':'DIS', 'Nike Inc Class B':'NKE', 'Cisco Systems Inc':'CSCO', 'Abbott Laboratories':'ABT', 'Danaher Corp':'DHR', 'T Mobile US Inc':'TMUS', 'Accenture Plc Class A':'ACN', 'Wells Fargo':'WFC', 'Comcast A Corp':'CMCSA', 'Verizon Communications Inc':'VZ', 'Adobe Inc':'ADBE', 'Salesforce.Com Inc':'CRM', 'Morgan Stanley':'MS', 'Linde Plc':'LIN', 'Philip Morris International Inc':'PM', 'Netflix Inc':'NFLX', 'Texas Instrument Inc':'TXN', 'United Parcel Service Inc Class B':'UPS', 'ConocoPhillips':'COP', 'Bristol Myers Squibb':'BMY', 'Nextera Energy Inc':'NEE', 'Qualcomm Inc':'QCOM', 'Raytheon Technologies Corporation':'RTX', 'AT&T Inc.':'T', 'Charles Schwab Corporation':'SCHW', 'Honeywell International Inc':'HON', 'Caterpillar Inc':'CAT', 'Amgen Inc':'AMGN', 'Boeing':'BA', 'Lowes Companies Inc':'LOW', 'Deere & Company':'DE', 'Starbucks Corp':'SBUX', 'Intel Corporation Corp':'INTC', 'Union Pacific Corp':'UNP', 'S&P Global Inc':'SPGI', 'International Business Machines Co':'IBM', 'Advanced Micro Devices Inc':'AMD', 'Elevance Health, Inc.':'ELV', 'Lockheed Martin Corp':'LMT', 'Goldman Sachs Group Inc':'GS', 'Prologis, Inc':'PLD', 'American Express':'AXP', 'Intuit Inc':'INTU', 'CVS Health Corp':'CVS', 'Blackrock Inc':'BLK', 'Medtronic Plc':'MDT', 'Gilead Sciences Inc':'GILD', 'American Tower Corporation':'AMT', 'Citigroup Inc':'C', 'Estee Lauder Inc Class A':'EL', 'Applied Material Inc':'AMAT', 'Chubb Ltd':'CB', 'Cigna Corp':'CI', 'Stryker Corp':'SYK', 'TJX Companies, Inc.':'TJX', 'Booking Holdings Inc':'BKNG', 'Servicenow Inc':'NOW', 'Automatic Data Processing Inc':'ADP', 'Paypal Holdings Inc':'PYPL', 'General Electric':'GE', 'Intuitive Surgical Inc':'ISRG', 'Mondelez International Inc':'MDLZ', 'Marsh & McLennan Inc':'MMC', 'Analog Devices Inc':'ADI', 'Vertex Pharmaceuticals Inc':'VRTX', 'Schlumberger Nv':'SLB', 'EOG Resources Inc':'EOG', 'Regeneron Pharmaceuticals Inc':'REGN', 'Altria Group Inc':'MO', 'Progressive Corp':'PGR', 'Zoetis Inc':'ZTS', 'Duke Energy Corp':'DUK', 'Target Corp':'TGT', 'Moderna, Inc.':'MRNA', 'Southern Co':'SO', 'US Bancorp':'USB', 'HCA Healthcare, Inc.':'HCA', 'Becton Dickinson':'BDX', 'Air Products And Chemicals Inc':'APD', 'Illinois Tool Inc':'ITW', 'Micron Technology Inc':'MU', 'Northrop Grumman Corp':'NOC', 'Lam Research Corp':'LRCX', 'Fiserv Inc':'FISV', 'Equinix, Inc.':'EQIX', 'Aon Plc':'AON', 'Boston Scientific Corp':'BSX', 'PNC Financial Services Group, Inc.':'PNC', 'Freeport-McMoRan, Inc.':'FCX', 'Truist Financial Corporation':'TFC', 'Crown Castle International Corp.':'CCI', 'Eaton Corporation, PLC':'ETN', 'Charter Communications Inc Class A':'CHTR', 'CME Group Inc Class A':'CME', 'Marathon Petroleum Corp':'MPC', 'CSX Corp':'CSX', 'Humana Inc':'HUM', 'Colgate-Palmolive':'CL', '3M':'MMM', 'General Dynamics Corp':'GD', 'Waste Management Inc':'WM', 'Occidental Petroleum Corp':'OXY', 'KLA-Tencor Corporation':'KLAC', 'Intercontinental Exchange Inc':'ICE', 'Activision Blizzard Inc':'ATVI', 'Sherwin Williams':'SHW', 'Moodys Corp':'MCO', 'Valero Energy Corp':'VLO', 'Pioneer Natural Resource':'PXD', 'Metlife Inc':'MET', 'Norfolk Southern Corp':'NSC', 'Marriott International Inc':'MAR', 'Mckesson Corp':'MCK', 'Synopsys Inc':'SNPS', 'Monster Beverage Corp':'MNST', 'Emerson Electric':'EMR', 'Dollar General Corp':'DG', 'Phillips 66':'PSX', 'Public Storage':'PSA', 'Dominion Energy Inc':'D', 'General Motors':'GM', 'Ford Motor Company':'F', 'Cadence Design Systems Inc':'CDNS', 'Sempra Energy':'SRE', 'Oreilly Automotive Inc':'ORLY', 'Keurig Dr Pepper Inc.':'KDP', 'Hess Corp':'HES', 'Kraft Heinz':'KHC', 'Edwards Lifesciences Corp':'EW', 'FedEx Corporation':'FDX', 'American Electric Power Inc':'AEP', 'American International Group Inc':'AIG', 'Johnson Controls International Plc':'JCI', 'Roper Technologies Inc':'ROP', 'Amphenol Corp':'APH', 'NXP Semiconductors Nv':'NXPI', 'Archer-Daniels-Midland Company':'ADM', 'Agilent Technologies Inc':'A', 'Aflac Inc':'AFL', 'Autozone Inc':'AZO', 'General Mills Inc':'GIS', 'Hershey Foods':'HSY', 'Corteva, Inc.':'CTVA', 'Travelers Companies Inc':'TRV', 'Autodesk Inc':'ADSK', 'Cintas Corp':'CTAS', 'Las Vegas Sands Corp':'LVS', 'Chipotle Mexican Grill Inc':'CMG', 'Fidelity National Information Services':'FIS', 'Capital One Financial Corp':'COF', 'Kimberly Clark Corp':'KMB', 'Nucor Corp':'NUE', 'Centene Corp':'CNC', 'Ecolab Inc':'ECL', 'Microchip Technology Inc':'MCHP', 'Motorola Solutions Inc':'MSI', 'Newmont Corporation':'NEM', 'Devon Energy Corp':'DVN', 'Realty Income Corporation':'O', 'IQVIA Holdings, Inc.':'IQV', 'Constellation Brands Class A':'STZ', 'Biogen Inc':'BIIB', 'Kinder Morgan Inc':'KMI', 'Arthur J Gallagher':'AJG', 'Fortinet Inc':'FTNT', 'Ross Stores Inc':'ROST', 'Paychex Inc':'PAYX', 'Exelon Corp':'EXC', 'Simon Property Group, Inc':'SPG', 'MSCI Inc':'MSCI', 'Dexcom Inc':'DXCM', 'Bank Of New York Mellon Corp':'BK', 'Dow Inc.':'DOW', 'Trane Technologies plc':'TT', 'Parker-Hannifin Corp':'PH', 'Idexx Laboratories Inc':'IDXX', 'Sysco Corp':'SYY', 'TE Connectivity Ltd':'TEL', 'Republic Services Inc':'RSG', 'Paccar Inc':'PCAR', 'Hilton Worldwide Holdings Inc':'HLT', 'Transdigm Group Inc':'TDG', 'Williams Inc':'WMB', 'Prudential Financial Inc':'PRU', 'Arista Networks Inc':'ANET', 'Xcel Energy Inc':'XEL', 'L3Harris Technologies, Inc.':'LHX', 'Halliburton':'HAL', 'Ameriprise Finance Inc':'AMP', 'DuPont de Nemours, Inc.':'DD', 'Carrier Global Corporation':'CARR', 'Warner Bros. Discovery, Inc. - Series A':'WBD', 'Yum Brands Inc':'YUM', 'Electronic Arts Inc':'EA', 'Old Dominion Freight Line Inc':'ODFL', 'Welltower Inc':'WELL', 'Cummins Inc':'CMI', 'Allstate Corp':'ALL', 'Resmed Inc':'RMD', 'Mettler Toledo Inc':'MTD', 'AmerisourceBergen Corp':'ABC', 'Otis Worldwide Corporation':'OTIS', 'Dollar Tree Inc':'DLTR', 'Consolidated Edison Inc':'ED', 'Illumina Inc':'ILMN', 'D R Horton Inc':'DHI', 'Cognizant Technology Solutions':'CTSH', 'State Street Corp':'STT', 'Ametek Inc':'AME', 'Albemarle Corp':'ALB', 'VICI Properties Inc':'VICI', 'Rockwell Automation Inc':'ROK', 'Keysight Technologies Inc':'KEYS', 'Brown Forman Inc Class B':'BF.B', 'Costar Group Inc':'CSGP', 'ON Semiconductor Corp':'ON', 'Baker Hughes Company Class A':'BKR', 'Kroger':'KR', 'Pacific Gas & Electric Co.':'PCG', 'Walgreen Boots Alliance Inc':'WBA', 'Digital Realty Trust, Inc':'DLR', 'SBA Communications Corporation':'SBAC', 'Discover Financial Services':'DFS', 'Lyondellbasell Industries NV':'LYB', 'Corning Inc':'GLW', 'Oneok Inc':'OKE', 'Public Service Enterprise Group Inc':'PEG', 'Global Payments Inc':'GPN', 'PPG Industries Inc':'PPG', 'United Rentals Inc':'URI', 'Nasdaq Inc':'NDAQ', 'WEC Energy Group Inc':'WEC', 'Aptiv Plc':'APTV', 'W.W. Grainger Inc':'GWW', 'Lennar Corporation Class A':'LEN', 'HP Inc':'HPQ', 'Fastenal':'FAST', 'American Water Works Inc':'AWK', 'Verisk Analytics Inc':'VRSK', 'Enphase Energy Inc':'ENPH', 'International Flavors & Fragrances':'IFF', 'Constellation Energy Corporation':'CEG', 'Eversource Energy':'ES', 'Willis Towers Watson Public Limited Company':'WTW', 'M&T Bank Corp':'MTB', 'Ebay Inc':'EBAY', 'Equifax Inc':'EFX', 'CBRE Group Inc':'CBRE', 'Diamondback Energy Inc':'FANG', 'Zimmer Biomet Holdings Inc':'ZBH', 'CDW Corp':'CDW', 'Edison International':'EIX', 'Gartner Inc':'IT', 'Alexandria Real Estate Equities, Inc':'ARE', 'Ulta Beauty Inc':'ULTA', 'T Rowe Price Group Inc':'TROW', 'Weyerhaeuser Company':'WY', 'Delta Air Lines Inc':'DAL', 'Tractor Supply':'TSCO', 'First Republic Bank':'FRC', 'Fifth Third Bancorp':'FITB', 'Hartford Financial Services Group':'HIG', 'Raymond James Inc':'RJF', 'Hormel Foods Corp':'HRL', 'AvalonBay Communities, Inc':'AVB', 'Arch Capital Group Ltd':'ACGL', 'Vulcan Materials':'VMC', 'Genuine Parts':'GPC', 'Fortive Corp':'FTV', 'Firstenergy Corp':'FE', 'Tyson Foods Inc Class A':'TSN', 'Equity Residential':'EQR', 'Baxter International Inc':'BAX', 'Ansys Inc':'ANSS', 'Verisign Inc':'VRSN', 'Kellogg':'K', 'Ameren Corp':'AEE', 'Principal Financial Group Inc':'PFG', 'Laboratory Corporation Of America':'LH', 'Ingersoll Rand Plc':'IR', 'Entergy Corp':'ETR', 'DTE Energy':'DTE', 'PPL Corporation':'PPL', 'Regions Financial Corp':'RF', 'Martin Marietta Materials Inc':'MLM', 'Huntington Bancshares Inc':'HBAN', 'Quanta Services Inc':'PWR', 'Steel Dynamics Inc':'STLD', 'Citizens Financial Group Inc':'CFG', 'Southwest Airlines':'LUV', 'Extra Space Storage Inc':'EXR', 'Hewlett Packard Enterprise':'HPE', 'Align Technology Inc':'ALGN', 'STERIS PLC':'STE', 'Hologic Inc':'HOLX', 'Cardinal Health Inc':'CAH', 'Monolithic Power Systems Inc':'MPWR', 'Ventas, Inc':'VTR', 'Northern Trust Corporation':'NTRS', 'Dover Corp':'DOV', 'Teledyne Technologies Inc':'TDY', 'West Pharmaceutical Services Inc':'WST', 'Coterra Energy Inc.':'CTRA', 'Church And Dwight Inc':'CHD', 'Waters Corp':'WAT', 'Epam Systems Inc':'EPAM', 'McCormick & Co Non-voting':'MKC', 'Invitation Homes Inc':'INVH', 'JB Hunt Transport Services Inc':'JBHT', 'Paycom Software Inc':'PAYC', 'Incyte Corp':'INCY', 'WR Berkley Corp':'WRB', 'Westinghouse Air Brake Technologies':'WAB', 'Centerpoint Energy Inc':'CNP', 'Garmin Ltd':'GRMN', 'Take Two Interactive Software Inc':'TTWO', 'Mid-America Apartment Communities, Inc':'MAA', 'First Solar Inc':'FSLR', 'Best Buy Inc':'BBY', 'AES Corp':'AES', 'Live Nation Entertainment Inc':'LYV', 'Xylem Inc':'XYL', 'Marathon Oil Corp':'MRO', 'Darden Restaurants Inc':'DRI', 'CMS Energy Corp':'CMS', 'Skyworks Solutions Inc':'SWKS', 'Ball Corporation':'BALL', 'Fox Corporation Class B':'FOX', 'Fox Corporation Class A':'FOXA', 'Rollins Inc':'ROL', 'Broadridge Financial Solutions Inc':'BR', 'IDEX Corp':'IEX', 'Amcor plc':'AMCR', 'Expedia Inc':'EXPE', 'Omnicom Group Inc':'OMC', 'Clorox':'CLX', 'Keycorp':'KEY', 'SVB Financial Group':'SIVB', 'Molina Healthcare Inc':'MOH', 'Conagra Brands Inc':'CAG', 'Cooper Companies, Inc.':'COO', 'Expeditors International Of Washington':'EXPD', 'Targa Resources Corp':'TRGP', 'Perkinelmer Inc':'PKI', 'SolarEdge Technologies Inc':'SEDG', 'Etsy Inc':'ETSY', 'Howmet Aerospace Inc.':'HWM', 'Mosaic':'MOS', 'Quest Diagnostics Inc':'DGX', 'CF Industries Holdings Inc':'CF', 'Cincinnati Financial Corp':'CINF', 'Brown & Brown Inc':'BRO', 'FMC Corp':'FMC', 'Synchrony Financial':'SYF', 'NVR, Inc.':'NVR', 'Royal Caribbean Cruises Ltd':'RCL', 'Atmos Energy Corp':'ATO', 'United Continental Holdings Inc':'UAL', 'Teradyne Inc':'TER', 'Factset Research Systems Inc':'FDS', 'Zebra Technologies Corp':'ZBRA', 'PTC Inc':'PTC', 'J.M. Smucker':'SJM', 'Copart Inc':'CPRT', 'MGM Resorts International':'MGM', 'Iron Mountain Incorporated':'IRM', 'Jacobs Engineering Group Inc.':'J', 'LKQ Corp':'LKQ', 'Avery Dennison Corp':'AVY', 'Campbell Soup':'CPB', 'Franklin Resources Inc':'BEN', 'Textron Inc':'TXT', 'Fleetcor Technologies Inc':'FLT', 'Gen Digital Inc.':'GEN', 'Paramount Global - Class B':'PARA', 'Healthpeak Properties, Inc.':'PEAK', 'Apache Corp':'APA', 'Loews Corp':'L', 'Match Group Inc':'MTCH', 'Seagate Technology Plc':'STX', 'Pool Corp':'POOL', 'Lamb Weston Holdings Inc':'LW', 'NetApp Inc':'NTAP', 'Viatris Inc.':'VTRS', 'Trimble Inc':'TRMB', 'Evergy Inc':'EVRG', 'Essex Property Trust, Inc':'ESS', 'Everest Re Group Ltd':'RE', 'Interpublic Group Of Companies Inc':'IPG', 'Kimco Realty Corporation':'KIM', 'Marketaxess Holdings Inc':'MKTX', 'Western Digital Corp':'WDC', 'Bio Rad Laboratories Inc Class A':'BIO', 'Akamai Technologies Inc':'AKAM', 'Alliant Energy Corp':'LNT', 'Nordson Corp':'NDSN', 'Leidos Holdings Inc':'LDOS', 'Tyler Technologies Inc':'TYL', 'UDR, Inc':'UDR', 'International Paper':'IP', 'Jack Henry & Associates, Inc.':'JKHY', 'Host Hotels & Resorts, Inc':'HST', 'Cboe Global Markets, Inc.':'CBOE', 'Celanese Corporation':'CE', 'Snap On Inc':'SNA', 'Packaging Corp Of America':'PKG', 'Camden Property Trust':'CPT', 'Dominos Pizza Inc':'DPZ', 'Stanley Black & Decker Inc':'SWK', 'Charles River Laboratories International':'CRL', 'EQT Corporation':'EQT', 'News Corp Class B':'NWS', 'News Corp Class A':'NWSA', 'Pultegroup Inc':'PHM', 'Carnival Corp':'CCL', 'Globe Life Inc.':'GL', 'Wynn Resorts Ltd':'WYNN', 'VF Corp':'VFC', 'Henry Schein Inc':'HSIC', 'C.H. Robinson Worldwide, Inc.':'CHRW', 'Qorvo, Inc.':'QRVO', 'Masco Corp':'MAS', 'Teleflex Inc':'TFX', 'Regency Centers Corporation':'REG', 'Caesars Entertainment Corp':'CZR', 'Nisource Inc':'NI', 'Ceridian HCM Holding Inc.':'CDAY', 'Eastman Chemical':'EMN', 'Boston Properties, Inc':'BXP', 'American Airlines Group Inc':'AAL', 'Universal Health Services Inc.':'UHS', 'Tapestry':'TPR', 'BorgWarner Inc':'BWA', 'Juniper Networks Inc':'JNPR', 'Carmax Inc':'KMX', 'Bath & Body Works, Inc.':'BBWI', 'Allegion PLC':'ALLE', 'Westrock':'WRK', 'Comerica Inc':'CMA', 'Catalent Inc':'CTLT', 'A O Smith Corp':'AOS', 'Federal Realty Investment Trust':'FRT', 'F5 Networks Inc':'FFIV', 'Advance Auto Parts Inc':'AAP', 'Hasbro Inc':'HAS', 'Robert Half':'RHI', 'Huntington Ingalls Industries Inc':'HII', 'Ralph Lauren Corp Class A':'RL', 'Invesco Ltd':'IVZ', 'Whirlpool Corp':'WHR', 'Pinnacle West Corp':'PNW', 'Pentair':'PNR', 'Dentsply Sirona Inc':'XRAY', 'Zions Bancorporation':'ZION', 'NRG Energy Inc':'NRG', 'Organon & Co.':'OGN', 'Dish Network Corp Class A':'DISH', 'Sealed Air Corp':'SEE', 'Signature Bank':'SBNY', 'Mohawk Industries Inc':'MHK', 'Davita Inc':'DVA', 'Generac Holdings Inc':'GNRC', 'Assurant Inc':'AIZ', 'DXC Technology Company':'DXC', 'Newell Brands Inc':'NWL', 'Alaska Air Group Inc':'ALK', 'Norwegian Cruise Line Holdings Ltd':'NCLH', 'Lincoln National Corp':'LNC', 'CenturyLink, Inc.':'LUMN', 'Bio-Techne Corp':'TECH', 'Molson Coors Brewing Class B':'TAP', 'GE HealthCare Technologies Inc.':'GEHC'}
    url = 'N/A'

    #Creates URL in Yahoo finances
    for key in url_dict:
        if key == name:
            url = "https://query2.finance.yahoo.com/v10/finance/quoteSummary/" + str(url_dict[key]) + "?modules=price"
    return url

#fuction returns the price of a stock given its name
def stock_price(name):
    #assert gen_url(name) != 'N/A', "There is no valid URL"
    resp = urllib.request.urlopen(gen_url(name))
    data = json.loads(resp.read())
    price = data['quoteSummary']['result'][0]['price']['regularMarketPrice']['raw']
    
    return f'{str(name) + " has a price of " + str(price)}'

#fuction returns the daily low of a stock given its name
def stock_daily_low(name):
    #assert sort_url(name) != 'N/A', "There is no valid URL"
    resp = urllib.request.urlopen(gen_url(name))
    data = json.loads(resp.read())
    result = data['quoteSummary']['result'][0]['price']['regularMarketDayLow']['raw']
    
    return f'{str(name) + " had a market low of " + str(result)}'

#function returns daily high of a stock
def stock_daily_high(name):
    #assert sort_url(name) != 'N/A', "There is no valid URL"
    resp = urllib.request.urlopen(gen_url(name))
    data = json.loads(resp.read())
    result = data['quoteSummary']['result'][0]['price']['regularMarketDayHigh']['raw']
    
    return f'{str(name) + " had a market high of " + str(result)}'

#generates a report of all of the above functions
def gen_report(name):

    print("---------------------------------")
    print(stock_price(name))
    print(stock_daily_low(name))
    print(stock_daily_high(name))
    print()




#runs report function (for testing)

name = ''
while name != "N/A":
    name = input('Stock Name: ')
    gen_report(name)
